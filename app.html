<input type="file" id="fileInput" accept=".pdf,.docx">
<button onclick="analisarArquivo()">Analisar Arquivo</button>
<pre id="resultadoArquivo"></pre>

<script>
async function analisarArquivo() {
  const inputFile = document.getElementById("fileInput");
  if (!inputFile.files.length) return alert("Selecione um arquivo PDF ou DOCX");

  const formData = new FormData();
  formData.append("file", inputFile.files[0]);

  try {
    const res = await fetch("https://vagalumeia-backend.onrender.com/upload", {
      method: "POST",
      body: formData
    });

    const data = await res.json();

    if (data.erro) {
      alert(data.erro);
    } else {
      document.getElementById("resultadoArquivo").innerText = data.texto_reformulado;
      addMsg("Arquivo analisado e reformulado com sucesso âœ…", "ia");
    }
  } catch (err) {
    alert("Erro ao analisar arquivo");
  }
}
</script>
